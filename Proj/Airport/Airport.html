<!DOCTYPE html>
<html>
<head>
	<title>Airport HUBs</title>
	<meta charset="utf-8" />

	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css"
   integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ=="
   crossorigin=""/>

  <link rel="stylesheet" href="CSS/MarkerCluster.css" />
  <link rel="stylesheet" href="CSS/MarkerCluster.Default.css" />
  <link rel="stylesheet" href="CSS/LabelCSS.css" />  
  
  
   <!-- create map in fullscreen -->
   <style>
        body {
            padding: 0;
            margin: 0;
        }
        html, body, #mapid {
            height: 100%;
            width: 100%;
        }
    </style>

</head>


<!-- use this if you want to add "var HUB_Master  = " to the geojson file and save it as a .js file -->y
<!-- <script type="text/javascript" src="HUB_Master.js"></script> -->



<body>
   <div id="mapid"></div>

  <!-- Jquery -->
  <script src="JS/jquery-3.2.1.js"></script>   
   <!-- Make sure you put this AFTER Leaflet's CSS -->
	<script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"
   integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log=="
   crossorigin=""></script>
  <!-- MarkerCluster -->
  <script src="JS/leaflet.markercluster.js"></script>
  
  <!-- AJAX -->
  <script src="JS/leaflet.ajax.js"></script>   
  <!-- spiderfy location -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/OverlappingMarkerSpiderfier-Leaflet/0.2.6/oms.min.js"></script>

 <!-- Put a div element with a certain id where you want your map to be:-->
<script>
   var map = L.map('mapid').setView([40.5, -95.3], 4);
   L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/light-v9/tiles/256/{z}/{x}/{y}?access_token={accessToken}', {
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
    maxZoom: 18,
    id: 'mapbox.streets',
    accessToken: 'pk.eyJ1IjoianByZWRtYW4iLCJhIjoianduT2tzOCJ9.bPjlTBZwiU7I3tvf3w-KLg'
}).addTo(map);

//Test1
var PlaneIcon1 = L.icon({
    iconUrl: 'icons/Plane1.png',
    iconSize: [25,25]
});

//Test2
var PlaneIcon2 = L.icon({
    iconUrl: 'icons/Plane2.png',
    iconSize: [25,25]
});

var DeltaIcon = L.divIcon({
    className: 'Major',
    html: 'D'
});

//var DeltaIcon = L.icon({
//    iconUrl: 'icons/Delta.jpg',
//    iconSize: [25,25]
// });

var AmericanIcon = L.divIcon({
    className: 'Major',
    html: 'A'
});

var FedExIcon = L.divIcon({
    className: 'Cargo',
    html: 'FE'
});

var UnitedIcon = L.divIcon({
    className: 'Major',
    html: 'U'
});

var UPSIcon = L.divIcon({
    className: 'Cargo',
    html: 'UPS'
});

var AlaskaIcon = L.divIcon({ 
    className: 'MidMajor', 
    html: 'AK'
});

var HawaiianIcon = L.divIcon({ 
    className: 'MidMajor', 
    html: 'H' 
});

var AllegiantIcon = L.divIcon({ 
    className: 'MidMajor', 
    html: 'Al' 
});

var FrontierIcon = L.divIcon({ 
    className: 'MidMajor', 
    html: 'F' 
}); 

var JetBlueIcon = L.divIcon({ 
    className: 'MidMajor', 
    html: 'JB' 
}); 

var SouthwestIcon = L.divIcon({ 
    className: 'MidMajor', 
    html: 'SW' 
}); 

var SpiritIcon = L.divIcon({ 
    className: 'Regional', 
    html: 'Sp' 
}); 

var SunCountryIcon = L.divIcon({ 
    className: 'MidMajor', 
    html: 'SC' 
}); 

var VirginIcon = L.divIcon({ 
    className: 'MidMajor', 
    html: 'V' 
}); 

var AirWiscoIcon = L.divIcon({ 
    className: 'Regional', 
    html: 'AW' 
}); 

var CompassIcon = L.divIcon({ 
    className: 'Regional', 
    html: 'C' 
}); 

var EndeavorIcon = L.divIcon({ 
    className: 'Regional', 
    html: 'E' 
}); 

var EnvoyIcon = L.divIcon({ 
    className: 'Regional', 
    html: 'Ev' 
}); 

var ExpressJetIcon = L.divIcon({ 
    className: 'Regional', 
    html: 'EJ' 
}); 

var GoJetIcon = L.divIcon({ 
    className: 'Regional', 
    html: 'GJ' 
}); 

var HorizonIcon = L.divIcon({ 
    className: 'Regional', 
    html: 'H' 
}); 

var MesaIcon = L.divIcon({ 
    className: 'Regional', 
    html: 'M' 
}); 

var PiedmontIcon = L.divIcon({ 
    className: 'Regional', 
    html: 'Pd' 
}); 

var PSAIcon = L.divIcon({ 
    className: 'Regional', 
    html: 'PSA' 
}); 

var RepublicIcon = L.divIcon({ 
    className: 'Regional', 
    html: 'R' 
}); 

var SkywestIcon = L.divIcon({ 
    className: 'Regional', 
    html: 'SkW' 
}); 

var TransStatesIcon = L.divIcon({ 
    className: 'Regional', 
    html: 'TS' 
}); 


var markers = L.markerClusterGroup({
    showCoverageOnHover: false,
    maxClusterRadius: 50,
    spiderfyDistanceMultiplier: 2
  }
  );


//this is used when the geojson is saved as a .js file (js script call from above)
//decided to keep it as a geojson rather than having to alter the script to make is .js compatible 
//L.geoJson(HUB_Master).addTo(map);

function customPoint (feature, layer) {
        if (feature.properties.airline ==='Delta') {
            layer.setIcon(DeltaIcon);
            };
        
        if (feature.properties.airline ==='FedEx') {
            layer.setIcon(FedExIcon);
            };
        
        if (feature.properties.airline ==='American') {
            layer.setIcon(AmericanIcon);
            };

        if (feature.properties.airline ==='United') {
            layer.setIcon(UnitedIcon);
            };

        if (feature.properties.airline ==='UPS') {
            layer.setIcon(UPSIcon);
            };

        if (feature.properties.airline ==='Alaska') {
            layer.setIcon(AlaskaIcon);  
            };

        if (feature.properties.airline ==='Hawaiian') {
            layer.setIcon(HawaiianIcon);  
            };
        
        if (feature.properties.airline ==='Allegiant') {
            layer.setIcon(AllegiantIcon);  
            };

        if (feature.properties.airline ==='Frontier') {
            layer.setIcon(FrontierIcon);
            };

        if (feature.properties.airline ==='JetBlue') {
            layer.setIcon(JetBlueIcon);
            };

        if (feature.properties.airline ==='Southwest') {
            layer.setIcon(SouthwestIcon);
            };

        if (feature.properties.airline ==='Spirit') {
            layer.setIcon(SpiritIcon);
            };

        if (feature.properties.airline ==='SunCountry') {
            layer.setIcon(SunCountryIcon);
            };

        if (feature.properties.airline ==='Virgin') {
            layer.setIcon(VirginIcon);
            };

        if (feature.properties.airline ==='AirWisco') {
            layer.setIcon(AirWiscoIcon);
            };

        if (feature.properties.airline ==='Compass') {
            layer.setIcon(CompassIcon);
            };

        if (feature.properties.airline ==='Endeavor') {
            layer.setIcon(EndeavorIcon);
            };

        if (feature.properties.airline ==='Envoy') {
            layer.setIcon(EnvoyIcon);
            };
        
        if (feature.properties.airline ==='ExpressJet') {
            layer.setIcon(ExpressJetIcon);
            };
        
        if (feature.properties.airline ==='GoJet') {
            layer.setIcon(GoJetIcon);
            };
        
        if (feature.properties.airline ==='Horizon') {
            layer.setIcon(HorizonIcon);
            };
        
        if (feature.properties.airline ==='Mesa') {
            layer.setIcon(MesaIcon);
            };
        
        if (feature.properties.airline ==='Piedmont') {
            layer.setIcon(PiedmontIcon);
            };
        
        if (feature.properties.airline ==='PSA') {
            layer.setIcon(PSAIcon);  
            };
        
        if (feature.properties.airline ==='Republic') {
            layer.setIcon(RepublicIcon);
            };
        
        if (feature.properties.airline ==='Skywest') {
            layer.setIcon(SkywestIcon);
            };
        
        if (feature.properties.airline ==='TransStates') {
            layer.setIcon(TransStatesIcon);
            };

        layer.bindPopup(
         "<strong style='color: #000066'><font size='4'><div align='center'>"+feature.properties.airline+'</strong></font></div><br>'+
         //"<div align='center'><img src=icons/"+feature.properties.airline+".jpg  width=50%  height=50%</div><br>"+
          "Airline Category: "+feature.properties.airline_cat
        );
        //width='100' height='50'
  };
//DEFAULT
//var geojsonLayer = new L.GeoJSON.AJAX("HUB_Master.geojson");
//geojsonLayer.addTo(map);


var geojsonLayer = new L.GeoJSON.AJAX("HUB_Master.geojson",{
    onEachFeature: customPoint
  });  


//https://stackoverflow.com/questions/29824478/leaflet-markercluster-with-geojson/29856139#29856139
geojsonLayer.on('data:loaded', function () {
    markers.addLayer(geojsonLayer);
    //console.log(markers);
    map.addLayer(markers);
});


</script>
</body>
</html>